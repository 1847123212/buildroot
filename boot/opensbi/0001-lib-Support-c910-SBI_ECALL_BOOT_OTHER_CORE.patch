From 117e26caf350ec55a0c5aec29ebdf9883acea8ab Mon Sep 17 00:00:00 2001
From: Liu Yibin <yibin_liu@c-sky.com>
Date: Fri, 3 Jan 2020 16:44:13 +0800
Subject: [PATCH] lib: Support c910 SBI_ECALL_BOOT_OTHER_CORE

Signed-off-by: Liu Yibin <yibin_liu@c-sky.com>
---
 include/sbi/sbi_ecall_interface.h | 1 +
 lib/sbi_ecall.c                   | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/include/sbi/sbi_ecall_interface.h b/include/sbi/sbi_ecall_interface.h
index 2bf004d..7df94aa 100644
--- a/include/sbi/sbi_ecall_interface.h
+++ b/include/sbi/sbi_ecall_interface.h
@@ -19,6 +19,7 @@
 #define SBI_ECALL_REMOTE_SFENCE_VMA		6
 #define SBI_ECALL_REMOTE_SFENCE_VMA_ASID	7
 #define SBI_ECALL_SHUTDOWN			8
+#define SBI_ECALL_BOOT_OTHER_CORE	0x09000003
 
 #define SBI_ECALL(__num, __a0, __a1, __a2) ({				\
 	register unsigned long a0 asm ("a0") = (unsigned long)(__a0);	\
diff --git a/lib/sbi_ecall.c b/lib/sbi_ecall.c
index 42123ba..31a32ce 100644
--- a/lib/sbi_ecall.c
+++ b/lib/sbi_ecall.c
@@ -74,6 +74,9 @@ int sbi_ecall_handler(u32 hartid, ulong mcause,
 		sbi_system_shutdown(scratch, 0);
 		ret = 0;
 		break;
+	case SBI_ECALL_BOOT_OTHER_CORE:
+		ret = 0;
+		break;
 	default:
 		break;
 	};
-- 
2.7.4

